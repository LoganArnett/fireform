<div ng-include="getTmplUrlforAuth('partials/app-header.html','partials/public-header.html')"></div>


<!-- Kill me -->
<style>
  .overflow{
    overflow: hidden;
  }
  .modal{
    position:fixed;
    top: 0px;
    left:0px;
    background: rgba(0, 0, 0, 0.5); 
    width:100%;
    height:100%;
  }
  .modal .modal-inner{
    margin: 200px auto;
    background-color: #eee;
    width: 70%;
    padding: 50px;
  }

  table, th, td
    {
    border: 1px solid black;
    padding: 4px;
    }
</style>
<!-- Kill me -->

<div body-class-inject="" id="content" ng-init="rowsHeader=[];rows=[];">

  <div class="container">

    <a ng-class="hideExample" href="/list"><- back to list</a>


    <h1>{{ListView.id}}</h1>



    <a ng-class="hideList" target="_blank" href='http://fireform/example/'>Post to this example</a>

    <a ng-click="deleteModal=''"; style="float:right;" ng-class="hideExample">Delete</a>
    <br>
    <span style="float:right;">---</span>
    <br>
    <div style="float:right; text-align:right;">
      <a ng-click="JSON2CSV(rows, labels, quotes)";>Download CSV</a>
      <br>
      <input type="checkbox" ng-model="labels" ng-init="labels=true" ng-checked="labels"> CSV labels
      <input type="checkbox" ng-model="quotes" ng-init="quotes=false"> CSV Quotes
    </div>
    <p ng-click="codeModal=''; bodyClassClick('overflow');"  class="action button">Get Code</p>
    <div id="code"><code>$('#myFormDiv').fireform('https://fireform.firebaseio.com/users/{{auth.user.uid}}/lists/{{ListView.id}}/formPosts');</code></div>
    
    <div tabletop ng-repeat="(keyF, valueF) in ListView.formPosts"></div><!-- Do this in controller scope some how-->    
     <table ng-class="sorted" class="friend" >
        <tr>
          <th class="{{key}}" ng-repeat="key in rowsHeader" >
            <a class="asc" href="javascript:null" root-scope ng-click="rootScope('predicate',key);">{{key}}</a>
              (<a class="dec" href="javascript:null" root-scope ng-click="rootScope('predicate','-'+key);">^</a>)
          </th>
        <tr>
        <tr ng-repeat="item in rows | orderBy:predicate">
<!-- nested repeats-->            
          <td ng-switch on="item[key].type" ng-repeat="key in rowsHeader">
<!-- Switch th dom element on the key var "on="key"" for the _time value of "key"-->            
            <span ng-switch-when="_time">{{item[key].value | date:'EEEE h:mma, MM/dd/yy'}}</span>
            <span ng-switch-when="checkbox"> <span>{{item[key].checked}}</span> <input disabled type="checkbox" ng-checked="item[key].checked"></span>
            <span ng-switch-when="select-one">{{item[key].value}} <select disabled><options></option><select></span>
            <span ng-switch-when="radio">{{item[key].value}} <input disabled type="radio"></span>
            <span ng-switch-when="text">{{item[key].value}}</span>
            <span ng-switch-default>{{item[key].value}}</span>
          </td>
        </tr>
      </table>

  </div>
</div>

<div  class="modal" ng-class="codeModal" ng-init="codeModal='hide'">
  <div class="modal-inner">
    <div>Copy This into your HTML</div>  
    <br>
    <pre highlight="$location.absUrl()" ><code> 
      &lt;script type="application/javascript" src="http://fireform.org/js/fireform.js"&gt;&lt;/script&gt;
      &lt;script type="application/javascript"&gt;
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;new Fireform('#MySelector', '{{location}}');
      &lt;/script&gt;
     </code></pre>
     <br>
    <button ng-click="codeModal='hide'; bodyClassClick('');">close</button> 
  </div>
</div>


<div  class="modal" ng-class="deleteModal" ng-init="deleteModal='hide'">
  <div class="modal-inner">
      <div>Are you sure you want to delete "{{ListView.id}}"? </div>  
      <br>
      <a ng-click="deleteList()">Delete</a>
      <br>
      <br>
      <button ng-click="deleteModal='hide'; bodyClassClick('');">close</button> 
  </div>
</div>
