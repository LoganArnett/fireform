"use strict";angular.module("myApp.controllers",[]).controller("PublicHomeCtrl",["$rootScope","$scope","syncData",function(e,t,n){n("syncedValue").$bind(t,"syncedValue")}]).controller("docController",["$rootScope","$scope","syncData",function(e,t,n){n("syncedValue").$bind(t,"syncedValue")}]).controller("AppHomeCtrl",["$scope","loginService","syncData",function(e,t,n){e.Lists=n("users/"+e.auth.user.uid+"/lists",10);n("syncedValue").$bind(e,"syncedValue")}]).controller("LoginCtrl",["$scope","loginService","$location",function(e,t,n){e.email=null;e.pass=null;e.confirm=null;e.createMode=!1;e.login=function(n){e.err=null;e.email?e.pass?t.login(e.email,e.pass,function(t,r){e.err=t?t+"":null;t||n&&n(r)}):e.err="Please enter a password":e.err="Please enter an email address"}}]).controller("SignupCtrl",["$scope","loginService","$location","syncData",function(e,t,n,r){function i(){e.email?e.pass?e.formName?e.formName.search(" ")!==-1&&(e.err="Form names can not contain spaces."):e.err="Please enter a name for your first form":e.err="Please enter a password":e.err="Please enter an email address";return!e.err}e.email=null;e.pass=null;e.confirm=null;e.createMode=!1;e.createAccount=function(){e.err=null;i()&&t.createAccount(e.email,e.pass,function(i,s){i?e.err=i?i+"":null:e.login(function(){t.createProfile(s.uid,s.email);var i=r("users/"+s.uid+"/lists/"+e.formName);i.$set({id:e.formName,_created:String(new Date),welcomMessage:!0});n.path("/list/"+s.id+"/"+e.formName)})})};e.login=function(n){e.err=null;e.email?e.pass?t.login(e.email,e.pass,function(t,r){e.err=t?t+"":null;t||n&&n(r)}):e.err="Please enter a password":e.err="Please enter an email address"}}]).controller("AccountCtrl",["$scope","loginService","syncData","$location",function(e,t,n,r){function i(){return{email:e.auth.user.email,oldpass:e.oldpass,newpass:e.newpass,confirm:e.confirm,callback:function(t){if(t)e.err=t;else{e.oldpass=null;e.newpass=null;e.confirm=null;e.msg="Password updated!"}}}}n(["users",e.auth.user.uid]).$bind(e,"user");e.newList=null;e.Lists=n("users/"+e.auth.user.uid+"/lists",10);e.oldpass=null;e.newpass=null;e.confirm=null;e.reset=function(){e.err=null;e.msg=null};e.updatePassword=function(){e.reset();t.changePassword(i())}}]).controller("AddCtrl",["$scope","loginService","syncData","$location",function(e,t,n,r){n(["users",e.auth.user.uid]).$bind(e,"user");e.newList=null;e.addList=function(){if(e.newList){e.err=null;var t=n("users/"+e.auth.user.uid+"/lists/"+e.newList),i=e.auth.user.uid.replace("simplelogin:","");if(t.$getIndex().length){e.err="A form repositry with this name already exists!";return!1}if(e.newList.search(" ")!==-1){e.err="Form names can not contain spaces.";return!1}t.$set({id:e.newList,_created:String(new Date)});r.path("/list/"+i+"/"+e.newList);e.newList=null}}}]).controller("ListCtrl",["$scope","loginService","syncData","$location",function(e,t,n,r){n(["users",e.auth.user.uid]).$bind(e,"user");e.$location=r;e.Lists=n("users/"+e.auth.user.uid+"/lists",10)}]).controller("listViewCtrl",["$rootScope","$scope","loginService","syncData","$location","$timeout",function(e,t,n,r,i,s){r(["users",t.auth.user.uid]).$bind(t,"user");var o=t.auth.user.uid.replace("simplelogin:",""),u=i.$$path.replace("/list/"+o+"/","");t.ListView=r("users/"+t.auth.user.uid+"/lists/"+u);t.emailConfirmation=r("users/"+t.auth.user.uid+"/lists/"+u+"/emailConfirmation");t.emailNotification=r("users/"+t.auth.user.uid+"/lists/"+u+"/emailNotification");t.welcomMessage=r("users/"+t.auth.user.uid+"/lists/"+u+"/welcomMessage");t.setEmailNotification=function(){var e=t.emailNotification.$value?!1:!0;t.emailNotification.$set(e)};t.setEmailConfirmation=function(){var e=t.emailConfirmation.$value?!1:!0;t.emailConfirmation.$set(e)};t.removeWelcome=function(){t.welcomMessage.$set(!1)};t.$location=i;t.pageLoaded=!1;t.pageLoadedFade=!1;t.ListView.$on("loaded",function(e){t.pageLoadedFade=!0;s(function(){t.pageLoaded=!0},300)});t.addWelcomeRemoveMe=function(){t.welcomMessage.$set(!0);t.welcomAlert=""};t.deleteList=function(){t.ListView.$remove();i.path("/list")}}]).controller("listViewExampleCtrl",["$rootScope","$scope","loginService","syncData","$location","$timeout",function(e,t,n,r,i,s){t.ListView=r("example");t.$location=i;t.pageLoaded=!1;t.pageLoadedFade=!1;t.ListView.$on("loaded",function(e){t.pageLoadedFade=!0;s(function(){t.pageLoaded=!0},300)})}]);