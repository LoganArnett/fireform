Fireform=function(e,t,n){that=this;if(window.location.href.indexOf("file")===0){console.warn("WARNING: Please run Fireform on page served from a web server to garentee functionality.")}this.error=function(e){console.error(e)};var r,i,s,o=n&&n.successClass?n.successClass:"submit-success",u=n&&n.failedClass?n.failedClass:"submit-failed",a=n&&n.formValidationClass?n.formValidationClass:"form-validation-failed",f=n&&n.inputValidationClass?n.inputValidationClass:"input-validation-failed",l=n&&n.simpleValidation?n.simpleValidation:false;that.emailNotification=n&&n.emailNotification?n.emailNotification:undefined;that.emailConfirmationName=n&&n.emailConfirmationName?n.emailConfirmationName:undefined;that.emailConfirmationFrom=n&&n.emailConfirmationFrom?n.emailConfirmationFrom:undefined;that.emailConfirmationSubject=n&&n.emailConfirmationSubject?n.emailConfirmationSubject:undefined;that.emailConfirmationBodyHTML=n&&n.emailConfirmationBodyHTML?n.emailConfirmationBodyHTML:undefined;that.emailConfirmationBodyText=n&&n.emailConfirmationBodyText?n.emailConfirmationBodyText:undefined;that.user=undefined;if(typeof e!=="string"){r=e}else if(e.search(/^\./)===0){r=document.getElementsByClassName(e.slice(1))[0];console.warn("We will default to the first form matching this class selector")}else if(e.search(/^\#/)===0){r=document.getElementById(e.slice(1))}else if(!r){this.error('Please use a Class or Id Selector. This mean your string should begin with a "." or "#".  You man also pass in a Dom elment object');return}if(!r.tagName){this.error("No DOM object found!");return}else if(r.tagName!=="FORM"){this.error("DOM elments is not a <form>");return}if(!t||t.length==-0){this.error("No Fireform URL entered");return}this.formDOMObject=r;this.inputs=i=r.elements;for(var c=this.inputs.length-1;c>=0;c--){var h;h=i[c].getAttribute("type");if(h==="submit"){s=i[c];break}}if(!s){this.error('Please add a submit button with a <input type="submit"> attr"');return}this.submitElement=s;this.submit=function(e){var n=true;var s;if(e&&e.preventDefault){e.preventDefault()}else if(event&&event.preventDefault){event.preventDefault()}var o={};o._time={};o._time.name="_time";o._time.type="_time";o._time.value=(new Date).toString();for(var u=that.inputs.length-1;u>=0;u--){var c,h;c=that.inputs[u].name?i[u].name:"input_"+String(u);h=i[u].type;value=i[u].value;if(i[u].getAttribute("email-confirmation")==="true"||that.emailConfirmationName===c)that.emailConfirmation=value;if(i[u].getAttribute("email-confirmation-from")==="true")that.emailConfirmationFrom=value;if(i[u].getAttribute("email-confirmation-from")==="true")that.emailConfirmationFrom=value;if(i[u].getAttribute("email-confirmation-subject")==="true")that.emailConfirmationSubject=value;if(i[u].getAttribute("email-confirmation-body-html")==="true")that.emailConfirmationBodyHTML=value;if(i[u].getAttribute("email-confirmation-body-text")==="true")that.emailConfirmationBodyText=value;if(i[u].getAttribute("email-notification")==="true"&&!that.emailNotification)that.emailNotification=value;if(h==="radio"&&i[u].checked===true){o[c]={};o[c].value=i[u].checked?value:"";o[c].type=i[u].type;o[c].name=i[u].name;s=i[u].checked||s?true:false}else if(h!=="submit"&&h!=="radio"){o[c]={};o[c].value=value;o[c].type=i[u].type;o[c].name=i[u].name;o[c].checked=i[u].checked}if(h==="radio"&&!s&&l)i[u].className+=" "+f;else if(h!=="submit"&&value===""&&l)i[u].className+=" "+f,n=false;else if(l)i[u].className=i[u].className.replace(new RegExp(f,"g"),"")}if(n&&s||!l){that.submitForm(t,o),r.className=r.className.replace(new RegExp(a,"g"),"")}else{r.className+=" "+a,that.error("Validation Failed. Classname "+a+" Added to inputs")}return false};this.getRepo=function(e){var t,n,r,t,i,s;if(e.match("fireform.org/publicexample")||e.match("fireform/publicexample")){return"https://fireform.firebaseio.com/example/formPosts.json"}n=e.split("://")[1].split("/list/");r=n[0].split(".org")[0];t=n[1].split("/");i=that.user=t[0];s=that.repo=t[1];return"https://"+r+".firebaseio.com/users/simplelogin:"+i+"/lists/"+s+"/formPosts.json"};this.getEmailRepo=function(e){var t,n,r,t,i,s;if(e.match("fireform.org/publicexample")){return null}n=e.split("://")[1].split("/list/");r=n[0].split(".org")[0];t=n[1].split("/");i=that.user=t[0];s=t[1];return"https://"+r+".firebaseio.com/users/simplelogin:"+i+"/"};this.submitForm=function(e,t){var i=new XMLHttpRequest,s=this.getRepo(e);i.open("POST",s,true);i.setRequestHeader("Content-type","application/x-www-form-urlencoded");i.send(JSON.stringify(t));var u={};u.form=t;payloadText="";payloadHTML="<table>";for(var a in u.form){payloadText+=" \r\n "+a+" : "+u.form[a].value;payloadHTML+=" <tr><td> "+a+" </td> <td>"+u.form[a].value+"</td> </tr>"}payloadText+="</table>";u.fireBaseRepo=e;u.payloadText=payloadText;u.payloadHTML=payloadHTML;u.uid=that.user?"simplelogin:"+that.user:undefined;u.fireFormRepo=that.repo;if(that.emailConfirmation){u.emailConfirmation=that.emailConfirmation?that.emailConfirmation:undefined;u.emailConfirmationFrom=that.emailConfirmationFrom?that.emailConfirmationFrom:"no-reply@"+window.location.host;u.emailConfirmationSubject=that.emailConfirmationSubject?that.emailConfirmationSubject:"Confirming your submition to"+window.location.host;u.emailConfirmationBodyText=that.emailConfirmationBodyText?that.emailConfirmationBodyText:"Thanks for you submition!";u.emailConfirmationBodyHTML=that.emailConfirmationBodyHTML?"<div></div>"+that.emailConfirmationBodyHTML:"<div></div><p>Thanks for your submition!<p>";var f="https://fireform.firebaseio.com/emailQConfirmation.json";var l=new XMLHttpRequest;l.open("POST",f,true);l.setRequestHeader("Content-type","application/x-www-form-urlencoded");l.send(JSON.stringify(u))}if(that.emailNotification){u.emailNotification=that.emailNotification?that.emailNotification:undefined;var c="https://fireform.firebaseio.com/emailQNotification.json";var h=new XMLHttpRequest;h.open("POST",c,true);h.setRequestHeader("Content-type","application/x-www-form-urlencoded");h.send(JSON.stringify(u))}i.onreadystatechange=function(){if(i.readyState==4){r.className+=" "+o;if(!n||!n.disableInput)that.disableInput(that.submitElement);if(n&&n.callback)n.callback(null,{url:s})}}};this.disableInput=function(e){var t=document.createAttribute("disabled");t.value="true";e.setAttributeNode(t)};s.onclick=this.submit;return this}